function formatNumber(n){return n.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatCurrency(n,t){var i=n.val(),e,u,s;if(i!==""){if(e=i.length,u=n.prop("selectionStart"),i.indexOf(".")>=0){var o=i.indexOf("."),f=i.substring(0,o),r=i.substring(o);f=formatNumber(f);r=formatNumber(r);t==="blur"&&(r+="00");r=r.substring(0,2);i=f+"."+r}else i=formatNumber(i),t==="blur"&&(i+=".00");n.val(i);s=i.length;u=s-e+u;n[0].setSelectionRange(u,u)}}$("input[data-type='currency']").on({keyup:function(){formatCurrency($(this))},blur:function(){formatCurrency($(this),"blur")}});